<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Banco Sólido & Questionável - Análise de Crédito</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
      color: #333;
    }

    header {
      background-color: #d90000;
      color: white;
      text-align: center;
      padding: 1.5rem;
    }

    header h1 {
      margin: 0;
      font-size: 1.6rem;
    }

    main {
      max-width: 600px;
      margin: 2rem auto;
      padding: 1.5rem;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
      color: #d90000;
      margin-bottom: 1.2rem;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    label {
      font-weight: bold;
      margin-bottom: 0.3rem;
    }

    input, select {
      padding: 0.7rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
      width: 100%;
    }

    button {
      background-color: #d90000;
      color: white;
      border: none;
      padding: 0.9rem;
      font-size: 1.1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.2s ease-in-out;
    }

    button:hover {
      background-color: #b80000;
    }

.resultado {
  margin-top: 1.5rem;
  padding: 1rem;
  border-radius: 10px;
  background-color: #ffefef;
  border: 1px solid #d90000;
  text-align: left; /* alinhamento à esquerda */
  font-weight: normal; /* texto normal */
  color: #d90000;
  min-height: 2rem;
  white-space: pre-wrap; /* mantém quebras de linha */
}

    @media (max-width: 600px) {
      main {
        margin: 1rem;
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Banco Sólido & Questionável</h1>
    <p>“Seu crédito é quase tão confiável quanto nós.”</p>
  </header>
  <main>
    <h2>Formulário de Análise de Crédito</h2>
    <form id="creditoForm">
      <div>
        <label for="nome">1. Nome completo</label>
        <input type="text" id="nome" required>
      </div>
      <div>
        <label for="idade">2. Idade</label>
        <input type="number" id="idade" required>
      </div>
      <div>
        <label for="cpf">3. CPF</label>
        <input type="text" id="cpf" placeholder="000.000.000-00" required>
      </div>
      <div>
        <label for="emprego">4. Você está atualmente empregado?</label>
        <select id="emprego" required>
          <option value="">Selecione</option>
          <option>Sim</option>
          <option>Não</option>
          <option>Prefiro não responder</option>
        </select>
      </div>
      <div>
        <label for="empregoDetalhes">5. Se sim, com o que trabalha?</label>
        <input type="text" id="empregoDetalhes" required>
      </div>
      <div>
        <label for="renda">6. Renda mensal aproximada (R$)</label>
        <input type="number" id="renda" required>
      </div>
      <div>
        <label for="dividas">7. Possui dívidas ativas?</label>
        <select id="dividas" required>
          <option value="">Selecione</option>
          <option>Não</option>
          <option>Sim, mas estou pagando</option>
          <option>Sim, mas quem liga?</option>
        </select>
      </div>
      <div>
        <label for="cartoes">8. Quantos cartões de crédito possui?</label>
        <input type="number" id="cartoes" required>
      </div>
      <div>
        <label for="emprestimos">9. Já pegou empréstimo conosco antes?</label>
        <select id="emprestimos" required>
          <option value="">Selecione</option>
          <option>Sim</option>
          <option>Não</option>
          <option>Não lembro (o que já é preocupante)</option>
        </select>
      </div>
      <div>
        <label for="proposito">10. Qual o propósito do crédito solicitado?</label>
        <input type="text" id="proposito" required>
      </div>
        <div>
          <label for="valorEmprestimo">11. Qual o valor do empréstimo desejado?</label>
          <input type="text" id="valorEmprestimo" required>
        </div> 
      <div>
        <label for="pagamento">12. Em quantas parcelas pretende pagar?</label>
        <input type="number" id="pagamento" required>
      </div>
      <label>13. Com que frequência você atrasa pagamentos?</label>
      <select id="H" required>
          <option value="">Selecione</option>
        <option value="1">Nunca atraso</option>
        <option value="0.7">Às vezes esqueço</option>
        <option value="0.3">Costumo atrasar bastante</option>
        <option value="0">Sempre atraso</option>
      </select>

      <!-- Endividamento Atual -->
      <label>14. Quanto do seu limite de crédito está sendo usado?</label>
      <select id="E" required>
          <option value="">Selecione</option>
        <option value="1">Quase nada (0-10%)</option>
        <option value="0.7">Pouco (10-30%)</option>
        <option value="0.5">Metade (30-60%)</option>
        <option value="0.2">Quase tudo (60-90%)</option>
        <option value="0">Estourado (100%)</option>
      </select>

      <!-- Tempo de Histórico -->
      <label>15. Há quanto tempo você tem conta/relacionamento bancário?</label>
      <select id="T" required>
          <option value="">Selecione</option>
        <option value="1">Mais de 10 anos</option>
        <option value="0.8">5 a 10 anos</option>
        <option value="0.5">1 a 5 anos</option>
        <option value="0.2">Menos de 1 ano</option>
        <option value="0">Abri a conta ontem</option>
      </select>

      <!-- Tipos de Crédito -->
      <label>16. Quantos tipos de crédito você já utilizou (bem gerenciados)?</label>
      <select id="C" required>
          <option value="">Selecione</option>
        <option value="1">Vários (cartão, financiamento, empréstimo, consórcio...)</option>
        <option value="0.7">Alguns (2 tipos diferentes)</option>
        <option value="0.4">Poucos (1 tipo só)</option>
        <option value="0">Nenhum</option>
      </select>

      <!-- Consultas Recentes -->
      <label>17. Quantas consultas ao seu CPF nos últimos 6 meses?</label>
      <select id="Q" required>
          <option value="">Selecione</option>
        <option value="1">Nenhuma</option>
        <option value="0.9">1 consulta</option>
        <option value="0.7">2 consultas</option>
        <option value="0.3">3 a 5 consultas</option>
        <option value="0">Mais de 5 consultas</option>
      </select>

      <button type="submit">Enviar Análise</button>
    </form>

    <div class="resultado" id="resultado"></div>
  </main>

  <script>
    document.getElementById("creditoForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const data = {
        nome: document.getElementById("nome").value,
        idade: document.getElementById("idade").value,
        cpf: document.getElementById("cpf").value,
        emprego: document.getElementById("emprego").value,
        empregoDetalhes: document.getElementById("empregoDetalhes").value,
        renda: document.getElementById("renda").value,
        dividas: document.getElementById("dividas").value,
        cartoes: document.getElementById("cartoes").value,
        emprestimos: document.getElementById("emprestimos").value,
        proposito: document.getElementById("proposito").value,
        valoremprestimo: document.getElementById("valorEmprestimo").value,
        pagamento: document.getElementById("pagamento").value,
        H: document.getElementById("H").value,
        E: document.getElementById("E").value,
        T: document.getElementById("T").value,
        C: document.getElementById("C").value,
        Q: document.getElementById("Q").value
      };

      const resultadoDiv = document.getElementById("resultado");
      resultadoDiv.textContent = "Enviando análise… aguarde.";

      try {
        const resp = await fetch("http://api42.logyc.com.br/webhook/804de795-6b93-43ad-b505-10841a564c83", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        });

        if (!resp.ok) throw new Error("Erro no servidor");

        const resposta = await resp.json();

        // Converte quebras de linha \n em <br> e exibe no HTML
        resultadoDiv.innerHTML = `<strong>Banco diz:</strong><br>${resposta.text.replace(/\n/g, "<br>")}`;

      } catch (err) {
        resultadoDiv.innerHTML = "Falha ao enviar análise. Nosso setor de TI terceirizado será notificado.";
        console.error(err);
      }
    });
  </script>
    <!-- Importa Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div style="margin-top:20px;">
  <h3>Simulação de Juros</h3>
  
  <label>Valor Inicial: </label>
  <input type="number" id="valorInicial" placeholder="Ex: 1000"><br><br>
  
  <label>Valor Mensal: </label>
  <input type="number" id="valorMensal" placeholder="Ex: 200"><br><br>
  
  <label>Meses: </label>
  <input type="number" id="meses" placeholder="Ex: 12"><br><br>
  
  <label>Taxa de Juros (% ao mês): </label>
  <input type="number" id="taxa" placeholder="Ex: 2" value="2"><br><br>
  
  <button onclick="simular()">Simular</button>
  
  <p id="erro" style="color:red; font-weight:bold;"></p>
  
  <canvas id="grafico" width="600" height="300"></canvas>
</div>

<script>
function simular() {
  const valorInicial = parseFloat(document.getElementById("valorInicial").value);
  const valorMensal = parseFloat(document.getElementById("valorMensal").value);
  const meses = parseInt(document.getElementById("meses").value);
  const taxa = parseFloat(document.getElementById("taxa").value) / 100;
  const erroEl = document.getElementById("erro");

  erroEl.innerText = "";

  // Validações
  if (!meses || meses <= 0) {
    erroEl.innerText = "Digite um número válido de meses.";
    return;
  }
  if (isNaN(valorInicial) && isNaN(valorMensal)) {
    erroEl.innerText = "Você precisa preencher Valor Inicial ou Valor Mensal.";
    return;
  }

  let simples = [];
  let compostos = [];
  let labels = [];

  let acumuladoSimples = valorInicial || 0;
  let acumuladoComposto = valorInicial || 0;

  for (let i = 1; i <= meses; i++) {
    if (!isNaN(valorMensal)) {
      acumuladoSimples += valorMensal;
      acumuladoComposto += valorMensal;
    }

    // Juros simples: só sobre o capital inicial
    let jurosSimples = (valorInicial || 0) * taxa * i;
    simples.push((valorInicial || 0) + (valorMensal || 0) * i + jurosSimples);

    // Juros compostos: sobre o valor acumulado
    acumuladoComposto *= (1 + taxa);
    compostos.push(acumuladoComposto);

    labels.push(i + "º mês");
  }

  // Destroi gráfico anterior se existir
  if (window.graficoInstance) {
    window.graficoInstance.destroy();
  }

  const ctx = document.getElementById("grafico").getContext("2d");
  window.graficoInstance = new Chart(ctx, {
    type: 'line',
    data: {
      labels: labels,
      datasets: [
        {
          label: 'Juros Simples',
          data: simples,
          borderColor: 'blue',
          backgroundColor: 'blue',
          fill: false,
          tension: 0.1,
          pointRadius: 4
        },
        {
          label: 'Juros Compostos',
          data: compostos,
          borderColor: 'green',
          backgroundColor: 'green',
          fill: false,
          tension: 0.1,
          pointRadius: 4
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        tooltip: {
          mode: 'index',
          intersect: false
        }
      },
      interaction: {
        mode: 'nearest',
        intersect: false
      },
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
}
</script>
</body>
</html>

